Metadata-Version: 2.4
Name: dequedict
Version: 0.1.0
Summary: Fast ordered dict with deque-like operations at both ends
Author: sebastian
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: C
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Provides-Extra: dev
Requires-Dist: pytest>=7.0; extra == "dev"
Requires-Dist: pytest-benchmark; extra == "dev"

# DequeDict

Fast ordered dictionary with O(1) deque operations at both ends.

## Features

- **O(1) key lookup** - like `dict`
- **O(1) pop/peek from both ends** - like `deque`
- **O(1) appendleft** - insert at front
- **O(1) move_to_end** - reorder existing keys
- **Maintains insertion order**
- **Full typing support** with `.pyi` stubs

## Installation

```bash
pip install dequedict
```

Or build from source:

```bash
pip install -e .
```

## Usage

```python
from dequedict import DequeDict

# Create from pairs or dict
dd = DequeDict([("a", 1), ("b", 2), ("c", 3)])

# Dict-like operations
dd["d"] = 4
value = dd["a"]  # 1
del dd["b"]

# Deque-like operations (O(1))
dd.peekleft()      # First value: 1
dd.peek()          # Last value: 4
dd.popleft()       # Remove and return first value
dd.pop()           # Remove and return last value
dd.appendleft("z", 0)  # Insert at front

# Move existing key to front or back
dd.move_to_end("a", last=False)  # Move to front

# Iteration in order
for key in dd:
    print(key, dd[key])

for key, value in dd.items():
    print(key, value)
```

## API

### Deque-like Operations (O(1))

| Method | Description |
|--------|-------------|
| `peekleft()` | Return first value without removing |
| `peekleftitem()` | Return first (key, value) without removing |
| `peekleftkey()` | Return first key without removing |
| `peek()` | Return last value without removing |
| `peekitem()` | Return last (key, value) without removing |
| `popleft()` | Remove and return first value |
| `popleftitem()` | Remove and return first (key, value) |
| `pop([key[, default]])` | Remove by key or from end |
| `popitem()` | Remove and return last (key, value) |
| `appendleft(key, value)` | Insert at front |
| `move_to_end(key, last=True)` | Move key to front or back |

### Dict-like Operations

| Method | Description |
|--------|-------------|
| `get(key[, default])` | Get value or default |
| `keys()` | View of keys in order |
| `values()` | View of values in order |
| `items()` | View of (key, value) in order |
| `clear()` | Remove all items |
| `copy()` | Shallow copy |
| `update(...)` | Update from dict/pairs/kwargs |
| `setdefault(key[, default])` | Get or set default |

## Benchmarks

Run benchmarks:

```bash
python benchmarks/benchmark.py
```

DequeDict provides O(1) operations where alternatives are O(n):

| Operation | DequeDict | dict | OrderedDict | deque |
|-----------|-----------|------|-------------|-------|
| Key lookup | O(1) | O(1) | O(1) | O(n) |
| Pop right | O(1) | O(1)* | O(1) | O(1) |
| Pop left | O(1) | N/A | O(1) | O(1) |
| Append left | O(1) | N/A | O(n)** | O(1) |
| Contains | O(1) | O(1) | O(1) | O(n) |
| Delete by key | O(1) | O(1) | O(1) | O(n) |

\* dict.popitem() is LIFO in Python 3.7+
\*\* OrderedDict requires move_to_end after insert

## Implementation

DequeDict uses:
- Python's built-in dict for O(1) key â†’ node lookup
- Doubly-linked list for O(1) operations at both ends

A pure Python fallback is provided if the C extension cannot be built.

## License

MIT

